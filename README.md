# 德州扑克赛事管理系统

专业的德州扑克协会专用赛事管理系统，支持自动码量校验、会编追踪、快速录入等功能。

## 功能特点

### 🎯 核心功能

1. **赛事模板管理**
   - 支持 600/1200/3400/6600/11000 五种赛事类型
   - 自动根据赛事类型带入起始码量

2. **自动码量校验**
   - 实时计算：总玩家数 × 起始码 = 系统总码量
   - 防呆机制：理论总码量 ≠ 实际登记总码量时，显示醒目的红色警告

3. **会编追踪**
   - 输入玩家会编后，自动显示该玩家的历史参赛纪录
   - 包括历史赛事类型、日期、最终码量、名次等信息

### 🚀 超越对手的细节

1. **虚拟数字键盘**
   - 点击会编输入框自动弹出虚拟键盘
   - 无需切换输入法，快速录入会编

2. **历史对照**
   - 输入会编时自动检测历史纪录
   - 智能显示玩家过往参赛成绩

3. **一键导出**
   - 生成专业的结算结存表图片
   - 可直接分享到 Line 群组
   - 排版精美，像专业赌场一样

## 技术栈

- **React 18** - 现代化 UI 框架
- **TypeScript** - 类型安全
- **Tailwind CSS** - 快速样式开发
- **Vite** - 快速构建工具
- **html2canvas** - 图片导出功能

## 安装与运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

### 3. 构建生产版本

```bash
npm run build
```

## 使用说明

### 选择赛事类型

1. 启动应用后，选择要举办的赛事类型（600/1200/3400/6600/11000）
2. 系统会自动带入对应的起始码量

### 新增玩家

1. 在「新增玩家」区域输入会编
   - 点击会编输入框会弹出虚拟数字键盘
   - 支持字母和数字输入（A-F, 0-9）
2. 输入玩家名称
3. 点击「新增玩家」按钮

### 会编历史追踪

- 当输入已存在的会编时，系统会自动弹出历史纪录模态框
- 显示该玩家过往参赛的详细信息

### 管理玩家

- **增加买入**：点击玩家列表中的「+1」按钮
- **修改码量**：直接在「当前码量」输入框中修改
- **移除玩家**：点击「移除」按钮

### 码量校验

- 系统实时显示：
  - 目前总人数
  - 理论总码量（人数 × 起始码）
  - 实际登记总码量
- 当码量不符时，统计面板会显示红色警告并闪烁

### 导出结算表

1. 点击右上角的「📥 导出结算结存表」按钮
2. 系统会自动生成 PNG 图片
3. 图片包含完整的赛事信息和玩家列表
4. 可直接分享到 Line 群组

## 项目结构

```
點碼系統/
├── constants/
│   └── pokerConfig.ts      # 赛事配置和类型定义
├── src/
│   ├── components/
│   │   ├── TournamentSelector.tsx    # 赛事选择界面
│   │   ├── TournamentDashboard.tsx   # 赛事管理主界面
│   │   ├── StatsPanel.tsx            # 统计面板
│   │   ├── PlayerInput.tsx           # 玩家输入组件
│   │   ├── VirtualKeyboard.tsx       # 虚拟数字键盘
│   │   ├── PlayerHistoryModal.tsx    # 历史纪录模态框
│   │   ├── PlayerList.tsx            # 玩家列表
│   │   └── ExportButton.tsx          # 导出功能
│   ├── App.tsx            # 主应用组件
│   ├── main.tsx           # 入口文件
│   └── index.css          # 全局样式
├── package.json
├── tsconfig.json
├── tailwind.config.js
└── vite.config.ts
```

## 配置说明

### 修改赛事类型

编辑 `constants/pokerConfig.ts` 文件：

```typescript
export const TOURNAMENT_TYPES = {
  '600': { name: '600限時錦標', startChip: 25000 },
  // 添加更多赛事类型...
};
```

### 添加玩家历史数据

在 `constants/pokerConfig.ts` 的 `PLAYER_HISTORY_DB` 中添加：

```typescript
export const PLAYER_HISTORY_DB: Record<string, PlayerHistory[]> = {
  'A105': [
    { tournamentType: '6600', tournamentName: '6600限時錦標', date: '2024-01-15', finalChips: 125000, rank: 5 },
  ],
};
```

## 注意事项

1. **数据持久化**：当前版本使用内存存储，刷新页面会丢失数据。生产环境建议连接后端 API 或使用本地存储。

2. **会编格式**：系统支持字母和数字组合的会编（如 A105, B203 等）。

3. **码量校验**：系统会在每次玩家数据变更时自动校验码量平衡。

## 未来改进

- [ ] 数据持久化（LocalStorage 或后端 API）
- [ ] 更多赛事类型支持
- [ ] 玩家排名功能
- [ ] 多语言支持
- [ ] 打印功能优化

## 许可证

MIT License
